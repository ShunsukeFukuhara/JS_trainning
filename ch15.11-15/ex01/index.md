## 問題

このサーバでは Cookie を使ってクライアントのセッションを識別し、タスク一覧をセッションごとに分離して管理する簡易的な認証/認可を行っている。サーバが設定している Cookie の値は sid=<セッションに一意に割り当てた ID>; SameSite=Lax; Path=/; HttpOnly; である。ToDo アプリでいくつかのタスクを作成した後、以下に挙げる操作を実施したとき、それぞれどのような結果になるか記載し、その理由を説明しなさい。

## 解答

- index.js でdocument.cookie プロパティを console.logで表示する

  - 結果: 空文字列が表示される
  - 理由: HttpOnly 属性が設定されているため、JavaScript からは Cookie にアクセスできないため

- ブラウザの開発者コンソールで http://localhost:3000/ の Cookie を表示する

  - 結果: Cookieが表示される
  - 理由: ブラウザの開発者ツールではHttpOnly属性が設定されているCookieも表示されるため

- ToDo アプリのタブをリロードする

  - 結果: 同じvalueを持つCookieが引き続き表示される。タスクは引き続き表示される
  - 理由: Cookieの有効期限が切れていない限り、リロードしても同じCookieが送信されるため

- 同一ブラウザの異なるタブやウィンドウで http://localhost:3000/ を開いて ToDo リストの状態を確認する

  - 結果: 同じタスク一覧が表示される
  - 理由: Cookieはブラウザ全体で共有されるため、同じセッションIDが送信され、同じタスク一覧が取得されるため

- シークレットウィンドウや異なるブラウザで http://localhost:3000/ を開いて ToDo リストの状態を確認する

  - 結果: 空のタスク一覧が表示される(なお、一度シークレットモードでタスクXを作成し、別のシークレットタブで開いた場合は、そのタスクXが表示される)
  - 理由: シークレットウィンドウや異なるブラウザではCookieが共有されないため、新しいセッションIDが割り当てられ、タスク一覧が空になるため

- http://127.0.0.1:3000/ を開いて ToDo リストの状態を確認する
  - 結果: CORSエラーが発生し、タスク一覧が表示されない
  - 理由: Cookieはドメインごとに管理されるため、localhostと127.0.0.1は異なるドメインと見なされ、Cookieが送信されないため
